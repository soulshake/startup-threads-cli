language: python

python:
- 2.7
- 3.6

os:
- "linux"

git:
  lfs_skip_smudge: true

before_install:
  - echo -e "machine github.com\n  login $GITHUB_TOKEN" >> ~/.netrc
  - git lfs pull
  - pip install .

script:
  - tox


after_success:
  - echo $TRAVIS_PULL_REQUEST
  - >-
      if [[ $TRAVIS_PULL_REQUEST = 'false' ]]; then
        curl \
        -H "Content-Type: application/json" \
        --data "{'source_type': 'Branch', 'source_name': '${TRAVIS_BRANCH}'}" \
        -X POST "$DOCKER_HUB_TRIGGER_URL";
      fi
